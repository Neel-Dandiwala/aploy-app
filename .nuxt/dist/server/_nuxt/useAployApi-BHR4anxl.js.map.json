{"file":"useAployApi-BHR4anxl.js","mappings":";;AAOO,SAAS,cAAc;AAC5B,QAAM,SAAS,iBAAA;AACf,QAAM,SAAU,OAAO,OAAO,UAAqB;AACnD,QAAM,EAAE,YAAA,IAAgB,eAAA;AAExB,WAAS,aAAqC;AAC5C,WAAO;AAAA,MACL,iBAAiB,YAAY;AAAA,IAAA;AAAA,EAEjC;AAEA,iBAAe,SACb,MACA,UAA+E,IACnE;AACZ,UAAM,MAAM,KAAK,WAAW,MAAM,IAAI,OAAO,GAAG,MAAM,GAAG,IAAI;AAC7D,WAAO,OAAU,KAAK;AAAA,MACpB,GAAG;AAAA,MACH,aAAa;AAAA,MACb,SAAS;AAAA,QACP,GAAG,WAAA;AAAA,QACH,GAAI,QAAQ;AAAA,MAAA;AAAA,IACd,CACD;AAAA,EACH;AAEA,SAAO,EAAE,QAAQ,YAAY,UAAU,YAAA;AACzC;","names":[],"sources":["../../../../composables/useAployApi.ts"],"sourcesContent":["import type { UseFetchOptions } from 'nuxt/app'\n\n/**\n * Returns options and helpers for calling the Aploy API with the current\n * environment (X-Environment: sandbox | production). SANDBOX = mock data,\n * Production = real DB scoped by workspace/user.\n */\nexport function useAployApi() {\n  const config = useRuntimeConfig()\n  const apiUrl = (config.public.apiUrl as string) || 'http://localhost:4000'\n  const { environment } = useEnvironment()\n\n  function apiHeaders(): Record<string, string> {\n    return {\n      'X-Environment': environment.value,\n    }\n  }\n\n  async function apiFetch<T>(\n    path: string,\n    options: { method?: string; body?: unknown; query?: Record<string, string> } = {}\n  ): Promise<T> {\n    const url = path.startsWith('http') ? path : `${apiUrl}${path}`\n    return $fetch<T>(url, {\n      ...options,\n      credentials: 'include',\n      headers: {\n        ...apiHeaders(),\n        ...(options.headers as Record<string, string>),\n      },\n    })\n  }\n\n  return { apiUrl, apiHeaders, apiFetch, environment }\n}\n"],"version":3}