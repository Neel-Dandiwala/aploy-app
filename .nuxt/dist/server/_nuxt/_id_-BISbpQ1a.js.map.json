{"file":"_id_-BISbpQ1a.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderComponent","_withCtx","_push","_parent","_","_scopeId","_createVNode","_withDirectives","_createTextVNode","_toDisplayString","_createBlock","_createCommentVNode","_ssrInterpolate","_openBlock","_Fragment","_renderList"],"sources":["../../../../pages/app/pipelines/[id].vue"],"sourcesContent":["<template>\n  <div class=\"app-page\">\n    <AppPageHeader\n      :title=\"pipeline?.name ?? 'Pipeline'\"\n      description=\"Edit and test run.\"\n      back-to=\"/app/pipelines\"\n      back-label=\"Pipelines\"\n    />\n    <p v-if=\"loading\" class=\"text-muted-foreground text-sm\">Loading…</p>\n    <p v-else-if=\"error\" class=\"app-error\">{{ error }}</p>\n    <template v-else-if=\"pipeline\">\n      <AppCard class=\"mb-4\">\n        <h3 class=\"app-section-title mb-2\">Test run</h3>\n        <p class=\"text-sm text-muted-foreground mb-2\">Send sample input (JSON) and see the output.</p>\n        <textarea\n          v-model=\"testInput\"\n          class=\"app-input min-h-[100px] font-mono text-sm mb-2\"\n          placeholder='{\"query\": \"Hello\"}'\n        />\n        <AppButton :disabled=\"running\" @click=\"runTest\">\n          {{ running ? 'Running…' : 'Run pipeline' }}\n        </AppButton>\n        <div v-if=\"testOutput !== null\" class=\"mt-4 rounded bg-muted/50 p-3\">\n          <p class=\"text-sm font-medium mb-2\">Output</p>\n          <pre class=\"text-xs overflow-auto max-h-[300px]\">{{ testOutputText }}</pre>\n        </div>\n      </AppCard>\n      <AppCard>\n        <h3 class=\"app-section-title mb-2\">Steps</h3>\n        <ul class=\"space-y-2 text-sm\">\n          <li v-for=\"(s, i) in pipeline.steps\" :key=\"i\" class=\"flex gap-2\">\n            <span class=\"text-muted-foreground\">{{ i + 1 }}.</span>\n            <span class=\"font-medium\">{{ (s as { name?: string }).name }}</span>\n            <span class=\"text-muted-foreground\">({{ (s as { type?: string }).type }})</span>\n          </li>\n        </ul>\n        <p v-if=\"!pipeline.steps?.length\" class=\"text-muted-foreground text-sm\">No steps.</p>\n      </AppCard>\n    </template>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\n\ndefinePageMeta({ layout: 'app' })\n\ninterface PipelineDetail {\n  id: string\n  name: string\n  description?: string\n  steps?: unknown[]\n}\n\nexport default defineComponent({\n  name: 'PipelineDetail',\n  data() {\n    return {\n      pipeline: null as PipelineDetail | null,\n      loading: true,\n      error: '',\n      testInput: '{}',\n      running: false,\n      testOutput: null as unknown,\n    }\n  },\n  computed: {\n    testOutputText(): string {\n      if (this.testOutput === null) return ''\n      return typeof this.testOutput === 'string'\n        ? this.testOutput\n        : JSON.stringify(this.testOutput, null, 2)\n    },\n  },\n  setup() {\n    const { apiFetch, apiUrl, environment } = useAployApi()\n    const { mockMode } = useMockMode()\n    return { apiFetch, apiUrl, environment, mockMode }\n  },\n  async mounted() {\n    await this.load()\n  },\n  methods: {\n    async load() {\n      this.loading = true\n      this.error = ''\n      const id = (this.$route.params as { id: string }).id\n      try {\n        this.pipeline = await this.apiFetch<PipelineDetail>(`/api/pipelines/${id}`)\n      } catch (e) {\n        this.error = (e as Error).message || 'Failed to load pipeline'\n      } finally {\n        this.loading = false\n      }\n    },\n    async runTest() {\n      if (!this.pipeline) return\n      let input: unknown\n      try {\n        input = this.testInput.trim() ? JSON.parse(this.testInput) : {}\n      } catch {\n        this.testOutput = { error: 'Invalid JSON in input' }\n        return\n      }\n      this.running = true\n      this.testOutput = null\n      try {\n        if (this.mockMode?.value) {\n          await new Promise((r) => setTimeout(r, 400))\n          this.testOutput = { result: 'Mock pipeline output', input }\n          return\n        }\n        const config = useRuntimeConfig()\n        const base = (config.public.apiUrl as string) || 'http://localhost:4000'\n        const url = `${base.replace(/\\/$/, '')}/v1/pipelines/${this.pipeline.id}/invoke`\n        const res = await $fetch<{ output?: unknown; steps?: unknown; error?: string }>(url, {\n          method: 'POST',\n          body: input,\n          credentials: 'include',\n          headers: { 'Content-Type': 'application/json', 'X-Environment': this.environment?.value ?? 'production' },\n        })\n        this.testOutput = res.error ? { error: res.error, output: res.output, steps: res.steps } : res.output\n      } catch (e: unknown) {\n        const err = e as { data?: unknown }\n        this.testOutput = err.data ?? (e as Error).message\n      } finally {\n        this.running = false\n      }\n    },\n  },\n})\n</script>\n"],"version":3}