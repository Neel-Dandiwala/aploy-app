{"version":3,"file":"new-CnnugUMm.js","sources":["../../../../pages/app/datasets/new.vue"],"sourcesContent":["<template>\n  <div class=\"app-page-narrow\">\n    <AppPageHeader\n      title=\"Add dataset\"\n      description=\"Upload or connect S3/GCS. JSONL format.\"\n      back-to=\"/app/datasets\"\n      back-label=\"Datasets\"\n    />\n    <form @submit.prevent=\"onSubmit\" class=\"space-y-6\">\n      <div>\n        <label class=\"app-label\">Dataset name</label>\n        <input\n          v-model=\"form.name\"\n          class=\"app-input\"\n          placeholder=\"Support chat v1\"\n        />\n      </div>\n      <div>\n        <label class=\"app-label\">Source</label>\n        <select v-model=\"form.sourceType\" class=\"app-select\">\n          <option value=\"upload\">Upload</option>\n          <option value=\"s3\">S3</option>\n          <option value=\"gcs\">GCS</option>\n        </select>\n        <template v-if=\"form.sourceType !== 'upload'\">\n          <input v-model=\"form.bucket\" class=\"app-input mt-2\" placeholder=\"Bucket\" />\n          <input v-model=\"form.prefix\" class=\"app-input mt-2\" placeholder=\"Prefix (optional)\" />\n        </template>\n      </div>\n      <div class=\"flex flex-wrap gap-3 pt-1\">\n        <AppButton type=\"submit\" :disabled=\"loading\">\n          {{ loading ? 'Startingâ€¦' : 'Start ingestion' }}\n        </AppButton>\n        <AppButton variant=\"secondary\" to=\"/app/datasets\">Cancel</AppButton>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\n\ndefinePageMeta({ layout: 'app' })\n\nexport default defineComponent({\n  name: 'NewDataset',\n  data() {\n    return {\n      form: { name: '', sourceType: 'upload', bucket: '', prefix: '' },\n      loading: false,\n    }\n  },\n  setup() {\n    const { apiFetch } = useAployApi()\n    return { apiFetch }\n  },\n  methods: {\n    async onSubmit() {\n      this.loading = true\n      const body: Record<string, unknown> = { name: this.form.name || 'Untitled dataset', schema_ref: 'chat' }\n      if (this.form.sourceType === 's3') body.source = { type: 's3', bucket: this.form.bucket, prefix: this.form.prefix }\n      else if (this.form.sourceType === 'gcs') body.source = { type: 'gcs', bucket: this.form.bucket, prefix: this.form.prefix }\n      else body.source = { type: 'upload' }\n      try {\n        const data = await this.apiFetch<{ id: string }>('/api/datasets', { method: 'POST', body })\n        await navigateTo(`/app/datasets/${data.id}`)\n      } finally {\n        this.loading = false\n      }\n    },\n  },\n})\n</script>\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrIncludeBooleanAttr","_ssrLooseContain","_ssrLooseEqual","_ssrRenderAttr","_push","_parent"],"mappings":";;;;;;;;;;;;;;;;;;AA4CA,MAAA,YAAe,gBAAgB;AAAA,EAC7B,MAAM;AAAA,EACN,OAAO;AACL,WAAO;AAAA,MACL,MAAM,EAAE,MAAM,IAAI,YAAY,UAAU,QAAQ,IAAI,QAAQ,GAAA;AAAA,MAC5D,SAAS;AAAA,IAAA;AAAA,EAEb;AAAA,EACA,QAAQ;AACN,UAAM,EAAE,SAAA,IAAa,YAAA;AACrB,WAAO,EAAE,SAAA;AAAA,EACX;AAAA,EACA,SAAS;AAAA,IACP,MAAM,WAAW;AACf,WAAK,UAAU;AACf,YAAM,OAAgC,EAAE,MAAM,KAAK,KAAK,QAAQ,oBAAoB,YAAY,OAAA;AAChG,UAAI,KAAK,KAAK,eAAe,KAAM,MAAK,SAAS,EAAE,MAAM,MAAM,QAAQ,KAAK,KAAK,QAAQ,QAAQ,KAAK,KAAK,OAAA;AAAA,eAClG,KAAK,KAAK,eAAe,MAAO,MAAK,SAAS,EAAE,MAAM,OAAO,QAAQ,KAAK,KAAK,QAAQ,QAAQ,KAAK,KAAK,OAAA;AAAA,UAC7G,MAAK,SAAS,EAAE,MAAM,SAAA;AAC3B,UAAI;AACF,cAAM,OAAO,MAAM,KAAK,SAAyB,iBAAiB,EAAE,QAAQ,QAAQ,MAAM;AAC1F,cAAM,WAAW,iBAAiB,KAAK,EAAE,EAAE;AAAA,MAC7C,UAAA;AACE,aAAK,UAAU;AAAA,MACjB;AAAA,IACF;AAAA,EAAA;AAEJ,CAAC;;;;AAtEM,QAAA,OAAAA,eAAAC,WAAA,EAAA,OAAM,qBAAiB,MAAA,CAAA,CAAA,GAAA;;IAExB,OAAM;AAAA,IACN,aAAY;AAAA,IACZ,WAAQ;AAAA,IACR,cAAW;AAAA,EAAA,GAAA,MAAA,OAAA,CAAA;kHAME,KAAA,KAAK,IAAI,CAAA,uJAAAC,sBAAA,MAAA,QAOH,KAAA,KAAK,UAAU,IAAAC,gBAAf,KAAA,KAAK,YAAU,QAAA,IAAAC,cAAf,KAAA,KAAK,YAAU,QAAA,CAAA,IAAA,cAAA,EAAA,qCAAAF,sBAAA,MAAA,QAAf,KAAA,KAAK,UAAU,IAAAC,gBAAf,KAAA,KAAK,YAAU,IAAA,IAAAC,cAAf,KAAA,KAAK,YAAU,IAAA,CAAA,IAAA,cAAA,EAAA,kCAAAF,sBAAA,MAAA,QAAf,KAAA,KAAK,UAAU,IAAAC,gBAAf,KAAA,KAAK,YAAU,KAAA,IAAAC,cAAf,KAAA,KAAK,YAAU,KAAA,CAAA,IAAA,cAAA,EAAA,wBAAA;AAKhB,MAAA,KAAA,KAAK,eAAU,UAAA;kDACb,KAAA,KAAK,MAAM,CAAA,sDAAAC,cAAA,SACX,KAAA,KAAK,MAAM,CAAA,kEAAA;AAAA;;;;;IAIlB,MAAK;AAAA,IAAU,UAAU,KAAA;AAAA,EAAA,GAAA;AAAA,qBAApC,CAEY,GAAAC,QAAAC,UAAA,aAAA;;iCADP,KAAA,UAAO,cAAA,iBAAA,CAAA,EAAA;AAAA,MAAA,OAAA;;0CAAP,KAAA,UAAO,cAAA,iBAAA,GAAA,CAAA;AAAA,QAAA;AAAA;;;;;IAED,SAAQ;AAAA,IAAY,IAAG;AAAA,EAAA,GAAA;AAAA,qBAAlC,CAAoE,GAAAD,QAAAC,UAAA,aAAA;;;;;0BAAlB,QAAM;AAAA,QAAA;AAAA;;;;;;;;;;;;;"}