{"file":"new-C8K0xz7R.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderAttr","_ssrIncludeBooleanAttr","_ssrLooseContain","_ssrLooseEqual","_ssrRenderList","_ssrInterpolate","_push","_parent"],"sources":["../../../../pages/app/datasets/new.vue"],"sourcesContent":["<template>\n  <div class=\"app-page-narrow\">\n    <AppPageHeader\n      title=\"Add dataset\"\n      description=\"Upload or connect S3/GCS/Hugging Face. JSONL format.\"\n      back-to=\"/app/datasets\"\n      back-label=\"Datasets\"\n    />\n    <form @submit.prevent=\"onSubmit\" class=\"space-y-6\">\n      <div>\n        <label class=\"app-label\">Dataset name</label>\n        <input\n          v-model=\"form.name\"\n          class=\"app-input\"\n          placeholder=\"Support chat v1\"\n        />\n      </div>\n      <div>\n        <label class=\"app-label\">Source</label>\n        <select v-model=\"form.sourceType\" class=\"app-select\">\n          <option value=\"upload\">Upload</option>\n          <option value=\"s3\">S3</option>\n          <option value=\"gcs\">GCS</option>\n          <option value=\"hf\">Hugging Face</option>\n        </select>\n        <template v-if=\"form.sourceType === 's3' || form.sourceType === 'gcs'\">\n          <label class=\"app-label mt-2\">Credential</label>\n          <select v-model=\"form.credentialId\" class=\"app-select\">\n            <option value=\"\">Select credential</option>\n            <option v-for=\"c in credentialsByType\" :key=\"c.id\" :value=\"c.id\">{{ c.name }} ({{ c.type }})</option>\n          </select>\n          <input v-model=\"form.bucket\" class=\"app-input mt-2\" placeholder=\"Bucket\" />\n          <input v-model=\"form.prefix\" class=\"app-input mt-2\" placeholder=\"Prefix (optional)\" />\n        </template>\n        <template v-else-if=\"form.sourceType === 'hf'\">\n          <label class=\"app-label mt-2\">Credential</label>\n          <select v-model=\"form.credentialId\" class=\"app-select\">\n            <option value=\"\">Select credential</option>\n            <option v-for=\"c in hfCredentials\" :key=\"c.id\" :value=\"c.id\">{{ c.name }}</option>\n          </select>\n          <input v-model=\"form.hfDataset\" class=\"app-input mt-2\" placeholder=\"Dataset (e.g. username/dataset_name)\" />\n        </template>\n      </div>\n      <p v-if=\"error\" class=\"app-error\">{{ error }}</p>\n      <div class=\"flex flex-wrap gap-3 pt-1\">\n        <AppButton type=\"submit\" :disabled=\"loading\">\n          {{ loading ? 'Startingâ€¦' : 'Create dataset' }}\n        </AppButton>\n        <AppButton variant=\"secondary\" to=\"/app/datasets\">Cancel</AppButton>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\n\ndefinePageMeta({ layout: 'app' })\n\ninterface Credential { id: string; name: string; type: string }\n\nexport default defineComponent({\n  name: 'NewDataset',\n  data() {\n    return {\n      form: {\n        name: '',\n        sourceType: 'upload' as 'upload' | 's3' | 'gcs' | 'hf',\n        bucket: '',\n        prefix: '',\n        credentialId: '',\n        hfDataset: '',\n      },\n      credentials: [] as Credential[],\n      loading: false,\n      error: '',\n    }\n  },\n  computed: {\n    credentialsByType(): Credential[] {\n      return this.credentials.filter((c) => c.type === this.form.sourceType)\n    },\n    hfCredentials(): Credential[] {\n      return this.credentials.filter((c) => c.type === 'hf')\n    },\n  },\n  setup() {\n    const { apiFetch } = useAployApi()\n    return { apiFetch }\n  },\n  async mounted() {\n    try {\n      const data = await this.apiFetch<{ credentials: Credential[] }>('/api/org/credentials')\n      this.credentials = data.credentials || []\n    } catch {\n      this.credentials = []\n    }\n  },\n  methods: {\n    async onSubmit() {\n      this.error = ''\n      this.loading = true\n      const body: Record<string, unknown> = { name: this.form.name || 'Untitled dataset', schema_ref: 'chat' }\n      if (this.form.sourceType === 's3') {\n        body.source = {\n          type: 's3',\n          bucket: this.form.bucket,\n          prefix: this.form.prefix,\n          credentialId: this.form.credentialId || undefined,\n        }\n      } else if (this.form.sourceType === 'gcs') {\n        body.source = {\n          type: 'gcs',\n          bucket: this.form.bucket,\n          prefix: this.form.prefix,\n          credentialId: this.form.credentialId || undefined,\n        }\n      } else if (this.form.sourceType === 'hf') {\n        body.source = {\n          type: 'hf',\n          dataset: this.form.hfDataset,\n          credentialId: this.form.credentialId || undefined,\n        }\n      } else {\n        body.source = { type: 'upload' }\n      }\n      try {\n        const data = await this.apiFetch<{ id: string }>('/api/datasets', { method: 'POST', body })\n        await navigateTo(`/app/datasets/${data.id}`)\n      } catch (e) {\n        this.error = (e as Error).message || 'Failed to create dataset'\n      } finally {\n        this.loading = false\n      }\n    },\n  },\n})\n</script>\n"],"version":3}