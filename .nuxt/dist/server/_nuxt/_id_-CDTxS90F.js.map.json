{"file":"_id_-CDTxS90F.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderComponent","_withCtx","_push","_parent","_ssrRenderClass","_","_scopeId","_createVNode","_createTextVNode","_toDisplayString","_createBlock","_ssrInterpolate","_openBlock","_Fragment","_renderList"],"sources":["../../../../pages/app/datasets/[id].vue"],"sourcesContent":["<template>\n  <div class=\"app-page\">\n    <AppPageHeader\n      title=\"Dataset — Preview & quality\"\n      description=\"Quality report and preview. Run ingestion to sync from source.\"\n      back-to=\"/app/datasets\"\n      back-label=\"Datasets\"\n    />\n    <p v-if=\"loading\" class=\"text-muted-foreground text-sm\">Loading…</p>\n    <p v-else-if=\"error\" class=\"app-error\">{{ error }}</p>\n    <template v-else-if=\"dataset\">\n      <AppCard class=\"mb-4\">\n        <h3 class=\"app-section-title mb-2\">Overview</h3>\n        <p class=\"text-sm text-muted-foreground\">\n          Status: <span :class=\"statusClass\">{{ dataset.status }}</span>\n          · Rows: {{ dataset.row_count ?? '—' }}\n        </p>\n        <p class=\"text-sm text-muted-foreground mt-1\">\n          Source: {{ sourceLabel }}\n        </p>\n        <div v-if=\"canIngest\" class=\"mt-3\">\n          <AppButton :disabled=\"ingesting\" @click=\"runIngestion\">\n            {{ ingesting ? 'Ingesting…' : 'Run ingestion' }}\n          </AppButton>\n        </div>\n      </AppCard>\n      <AppCard class=\"mb-4\">\n        <h3 class=\"app-section-title mb-4\">Versions</h3>\n        <ul v-if=\"dataset.versions?.length\" class=\"space-y-2 text-sm\">\n          <li\n            v-for=\"v in dataset.versions\"\n            :key=\"v.id\"\n            class=\"flex justify-between rounded border border-border/50 px-3 py-2\"\n          >\n            <span class=\"font-mono\">{{ v.tag }}</span>\n            <span class=\"text-muted-foreground\">{{ v.status }}</span>\n            <span class=\"text-muted-foreground\">{{ v.row_count ?? '—' }} rows</span>\n          </li>\n        </ul>\n        <p v-else class=\"text-muted-foreground text-sm\">No versions yet. Run ingestion to create one.</p>\n      </AppCard>\n      <AppCard>\n        <h3 class=\"app-section-title mb-4\">Quality report</h3>\n        <ul class=\"space-y-2 text-sm text-muted-foreground\">\n          <li>Duplication: {{ dataset.quality?.duplication_pct ?? '—' }}%</li>\n          <li>PII flagged: {{ dataset.quality?.pii_flagged ?? '—' }}</li>\n          <li>Schema adherence: {{ dataset.quality?.schema_adherence ?? '—' }}%</li>\n        </ul>\n      </AppCard>\n    </template>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\n\ndefinePageMeta({ layout: 'app' })\n\ninterface DatasetVersionInfo {\n  id: string\n  tag: string\n  status: string\n  row_count?: number\n  created_at?: string | null\n}\n\ninterface DatasetDetail {\n  id: string\n  name: string\n  status: string\n  source?: { type?: string; bucket?: string; prefix?: string; dataset?: string }\n  row_count?: number\n  quality?: { duplication_pct?: number; pii_flagged?: number; schema_adherence?: number }\n  versions?: DatasetVersionInfo[]\n}\n\nexport default defineComponent({\n  name: 'DatasetDetail',\n  data() {\n    return {\n      dataset: null as DatasetDetail | null,\n      loading: true,\n      error: '',\n      ingesting: false,\n    }\n  },\n  computed: {\n    sourceLabel(): string {\n      if (!this.dataset?.source) return 'Upload'\n      const s = this.dataset.source\n      if (s.type === 's3') return `S3 ${s.bucket || ''} ${(s as { prefix?: string }).prefix || ''}`.trim()\n      if (s.type === 'gcs') return `GCS ${s.bucket || ''} ${(s as { prefix?: string }).prefix || ''}`.trim()\n      if (s.type === 'hf') return `Hugging Face ${(s as { dataset?: string }).dataset || ''}`.trim()\n      return String(s.type || 'upload')\n    },\n    canIngest(): boolean {\n      return !!this.dataset && ['s3', 'gcs', 'hf'].includes(this.dataset.source?.type || '')\n    },\n    statusClass(): string {\n      if (!this.dataset) return ''\n      if (this.dataset.status === 'ready') return 'text-emerald-600'\n      if (this.dataset.status === 'failed') return 'text-destructive'\n      return 'text-amber-600'\n    },\n  },\n  setup() {\n    const { apiFetch } = useAployApi()\n    return { apiFetch }\n  },\n  async mounted() {\n    await this.load()\n  },\n  methods: {\n    async load() {\n      this.loading = true\n      this.error = ''\n      const id = (this.$route.params as { id: string }).id\n      try {\n        this.dataset = await this.apiFetch<DatasetDetail>(`/api/datasets/${id}`)\n      } catch (e) {\n        this.error = (e as Error).message || 'Failed to load dataset'\n      } finally {\n        this.loading = false\n      }\n    },\n    async runIngestion() {\n      if (!this.dataset) return\n      this.ingesting = true\n      try {\n        await this.apiFetch<{ status: string; row_count: number }>(`/api/datasets/${this.dataset.id}/ingest`, { method: 'POST' })\n        await this.load()\n      } catch (e) {\n        this.error = (e as Error).message || 'Ingestion failed'\n      } finally {\n        this.ingesting = false\n      }\n    },\n  },\n})\n</script>\n"],"version":3}