{"file":"org-B0cgc8el.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderComponent","_push","_parent","_ssrInterpolate","_","_scopeId","_createVNode","_createBlock","_toDisplayString","_createCommentVNode","_createTextVNode","_ssrRenderList","_Fragment","_renderList","_openBlock","_withDirectives"],"sources":["../../../../pages/app/org.vue"],"sourcesContent":["<template>\n  <div class=\"app-page\">\n    <AppPageHeader title=\"Organization\" />\n    <div class=\"space-y-4\">\n      <AppCard>\n        <h3 class=\"app-section-title mb-1\">General</h3>\n        <p v-if=\"org\" class=\"app-section-description\">\n          Name: {{ org.name }}. Slug: {{ org.slug }}.\n        </p>\n        <p v-else-if=\"loadingOrg\" class=\"text-muted-foreground text-sm\">Loading…</p>\n        <p class=\"text-sm text-muted-foreground mt-3\">\n          Manage S3, GCS, and Hugging Face in\n          <NuxtLink to=\"/app/integrations\" class=\"text-accent hover:text-accent-hover transition-colors\">Integrations</NuxtLink>.\n        </p>\n      </AppCard>\n      <AppCard>\n        <h3 class=\"app-section-title mb-4\">API keys</h3>\n        <p v-if=\"loadingKeys\" class=\"text-muted-foreground text-sm\">Loading…</p>\n        <ul v-else class=\"space-y-2\">\n          <li\n            v-for=\"k in apiKeys\"\n            :key=\"k.id\"\n            class=\"flex items-center justify-between gap-2 rounded border border-border/50 bg-muted/30 px-3 py-2 text-sm\"\n          >\n            <span class=\"text-foreground\">{{ k.name }}</span>\n            <span class=\"font-mono text-muted-foreground\">{{ k.key_prefix }}…</span>\n            <span class=\"text-muted-foreground text-xs\">{{ k.last_used_at ? 'Used ' + formatDate(k.last_used_at) : 'Never used' }}</span>\n            <button\n              type=\"button\"\n              class=\"text-destructive hover:underline\"\n              @click=\"revokeApiKey(k.id)\"\n            >\n              Revoke\n            </button>\n          </li>\n          <p v-if=\"!loadingKeys && apiKeys.length === 0\" class=\"text-muted-foreground text-sm\">\n            No API keys. Create one to call invoke APIs from scripts or external apps.\n          </p>\n        </ul>\n        <div v-if=\"showCreateKey\" class=\"mt-4 space-y-2 border-t border-border/50 pt-4\">\n          <label class=\"app-label\">Key name</label>\n          <input v-model=\"newKeyName\" class=\"app-input\" placeholder=\"e.g. Production\" />\n          <div class=\"flex gap-2\">\n            <AppButton :disabled=\"creatingKey\" @click=\"createApiKey\">\n              {{ creatingKey ? 'Creating…' : 'Create key' }}\n            </AppButton>\n            <AppButton variant=\"secondary\" @click=\"showCreateKey = false; newKeyName = ''\">Cancel</AppButton>\n          </div>\n        </div>\n        <div v-if=\"newKeyRaw\" class=\"mt-4 rounded border border-amber-500/50 bg-amber-500/10 p-3 text-sm\">\n          <p class=\"font-medium text-amber-700 dark:text-amber-400\">Copy your key now. It won’t be shown again.</p>\n          <code class=\"mt-2 block break-all font-mono text-xs\">{{ newKeyRaw }}</code>\n          <AppButton class=\"mt-2\" variant=\"secondary\" size=\"sm\" @click=\"copyKeyThenClose\">Copy and close</AppButton>\n        </div>\n        <AppButton v-else-if=\"!showCreateKey\" class=\"mt-4\" variant=\"secondary\" @click=\"showCreateKey = true\">\n          Create API key\n        </AppButton>\n      </AppCard>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\n\ndefinePageMeta({ layout: 'app' })\n\nexport default defineComponent({\n  name: 'OrgPage',\n  data() {\n    return {\n      org: null as { name: string; slug: string } | null,\n      loadingOrg: true,\n      apiKeys: [] as Array<{ id: string; name: string; key_prefix: string; last_used_at?: string | null }>,\n      loadingKeys: true,\n      showCreateKey: false,\n      newKeyName: '',\n      creatingKey: false,\n      newKeyRaw: '',\n    }\n  },\n  setup() {\n    const { apiFetch } = useAployApi()\n    return { apiFetch }\n  },\n  async mounted() {\n    await Promise.all([this.loadOrg(), this.loadApiKeys()])\n  },\n  methods: {\n    async loadOrg() {\n      this.loadingOrg = true\n      try {\n        this.org = await this.apiFetch<{ name: string; slug: string }>('/api/org')\n      } catch {\n        this.org = null\n      } finally {\n        this.loadingOrg = false\n      }\n    },\n    async loadApiKeys() {\n      this.loadingKeys = true\n      try {\n        const data = await this.apiFetch<{ api_keys: Array<{ id: string; name: string; key_prefix: string; last_used_at?: string | null }> }>('/api/org/api-keys')\n        this.apiKeys = data.api_keys || []\n      } catch {\n        this.apiKeys = []\n      } finally {\n        this.loadingKeys = false\n      }\n    },\n    formatDate(iso: string) {\n      try {\n        return new Date(iso).toLocaleDateString()\n      } catch {\n        return iso\n      }\n    },\n    async createApiKey() {\n      if (!this.newKeyName.trim()) return\n      this.creatingKey = true\n      try {\n        const data = await this.apiFetch<{ raw_key: string }>('/api/org/api-keys', {\n          method: 'POST',\n          body: { name: this.newKeyName.trim() },\n        })\n        this.newKeyRaw = data.raw_key\n        this.showCreateKey = false\n        this.newKeyName = ''\n        await this.loadApiKeys()\n      } catch (e) {\n        alert((e as Error).message || 'Create failed')\n      } finally {\n        this.creatingKey = false\n      }\n    },\n    copyKeyThenClose() {\n      if (this.newKeyRaw && typeof navigator !== 'undefined' && navigator.clipboard) {\n        navigator.clipboard.writeText(this.newKeyRaw)\n      }\n      this.newKeyRaw = ''\n    },\n    async revokeApiKey(id: string) {\n      if (!confirm('Revoke this API key? It will stop working immediately.')) return\n      try {\n        await this.apiFetch(`/api/org/api-keys/${id}`, { method: 'DELETE' })\n        await this.loadApiKeys()\n      } catch (e) {\n        alert((e as Error).message || 'Revoke failed')\n      }\n    },\n  },\n})\n</script>\n"],"version":3}