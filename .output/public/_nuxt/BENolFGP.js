import{_ as f}from"./B2i7BuXP.js";import{_ as c}from"./3gX_DK_6.js";import{u as b}from"./1A9NfWrD.js";import{e as y,n as g,c as i,b as p,a,h as s,v as r,l as S,F as v,j as k,w as l,i as w,o as d,d as m,t as T}from"./eG_W-IWR.js";import{_ as h}from"./DlAUqK2U.js";import"./BK5343vK.js";import"./C5yYOmo6.js";const V=y({name:"NewDataset",data(){return{form:{name:"",sourceType:"upload",bucket:"",prefix:""},loading:!1}},setup(){const{apiFetch:e}=b();return{apiFetch:e}},methods:{async onSubmit(){this.loading=!0;const e={name:this.form.name||"Untitled dataset",schema_ref:"chat"};this.form.sourceType==="s3"?e.source={type:"s3",bucket:this.form.bucket,prefix:this.form.prefix}:this.form.sourceType==="gcs"?e.source={type:"gcs",bucket:this.form.bucket,prefix:this.form.prefix}:e.source={type:"upload"};try{const t=await this.apiFetch("/api/datasets",{method:"POST",body:e});await g(`/app/datasets/${t.id}`)}finally{this.loading=!1}}}}),U={class:"app-page-narrow"},C={class:"flex flex-wrap gap-3 pt-1"};function N(e,t,$,x,A,B){const u=f,n=c;return d(),i("div",U,[p(u,{title:"Add dataset",description:"Upload or connect S3/GCS. JSONL format.","back-to":"/app/datasets","back-label":"Datasets"}),a("form",{onSubmit:t[4]||(t[4]=w((...o)=>e.onSubmit&&e.onSubmit(...o),["prevent"])),class:"space-y-6"},[a("div",null,[t[5]||(t[5]=a("label",{class:"app-label"},"Dataset name",-1)),s(a("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.form.name=o),class:"app-input",placeholder:"Support chat v1"},null,512),[[r,e.form.name]])]),a("div",null,[t[7]||(t[7]=a("label",{class:"app-label"},"Source",-1)),s(a("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.sourceType=o),class:"app-select"},[...t[6]||(t[6]=[a("option",{value:"upload"},"Upload",-1),a("option",{value:"s3"},"S3",-1),a("option",{value:"gcs"},"GCS",-1)])],512),[[S,e.form.sourceType]]),e.form.sourceType!=="upload"?(d(),i(v,{key:0},[s(a("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>e.form.bucket=o),class:"app-input mt-2",placeholder:"Bucket"},null,512),[[r,e.form.bucket]]),s(a("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>e.form.prefix=o),class:"app-input mt-2",placeholder:"Prefix (optional)"},null,512),[[r,e.form.prefix]])],64)):k("",!0)]),a("div",C,[p(n,{type:"submit",disabled:e.loading},{default:l(()=>[m(T(e.loading?"Startingâ€¦":"Start ingestion"),1)]),_:1},8,["disabled"]),p(n,{variant:"secondary",to:"/app/datasets"},{default:l(()=>[...t[8]||(t[8]=[m("Cancel",-1)])]),_:1})])],32)])}const E=h(V,[["render",N]]);export{E as default};
