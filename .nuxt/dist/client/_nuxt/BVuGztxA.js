import{_ as v}from"./CyeEiYbI.js";import{_ as b}from"./DyabKexD.js";import{u as w}from"./BIUpqFe3.js";import{e as c,n as _,c as n,b as i,a as t,h as r,l as p,m as d,g as m,t as u,w as f,j as D,o as a,d as y}from"./BpnP_1c4.js";import{_ as S}from"./DlAUqK2U.js";import"./Dvi7YPqy.js";import"./FoZdgCff.js";import"./BRJawhm2.js";import"./BIYn82lU.js";const V=c({name:"NewDeployment",data(){return{form:{model_version_id:"mv_1",type:"api",region:"us-east-1"},loading:!1,error:""}},setup(){const{apiFetch:o}=w();return{apiFetch:o}},methods:{async onSubmit(){this.error="",this.loading=!0;try{await this.apiFetch("/api/deploy",{method:"POST",body:{model_version_id:this.form.model_version_id,type:this.form.type,config:this.form.type==="api"?{region:this.form.region}:{}}}),await _("/app/deployments")}catch(o){this.error=o.message||"Deploy failed"}finally{this.loading=!1}}}}),A={class:"app-page-narrow"},h={class:"flex gap-6"},k={class:"flex items-center gap-2 cursor-pointer text-muted-foreground hover:text-zinc-900 transition-colors"},x={class:"flex items-center gap-2 cursor-pointer text-muted-foreground hover:text-zinc-900 transition-colors"},B={key:0},N={key:1,class:"app-error"},P={class:"flex flex-wrap gap-3 pt-1"};function C(o,e,M,T,U,$){const g=v,l=b;return a(),n("div",A,[i(g,{title:"Deploy model",description:"We host your model; you get an API. Or export weights.","back-to":"/app/deployments","back-label":"Deployments"}),t("form",{onSubmit:e[4]||(e[4]=D((...s)=>o.onSubmit&&o.onSubmit(...s),["prevent"])),class:"space-y-6"},[t("div",null,[e[6]||(e[6]=t("label",{class:"app-label"},"Model version",-1)),r(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.form.model_version_id=s),class:"app-select"},[...e[5]||(e[5]=[t("option",{value:"mv_1"},"mv_1 (Support Bot, run_1)",-1)])],512),[[p,o.form.model_version_id]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"app-label"},"Type",-1)),t("div",h,[t("label",k,[r(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.form.type=s),type:"radio",value:"api",class:"rounded border-border text-accent focus:ring-accent/30"},null,512),[[d,o.form.type]]),e[7]||(e[7]=t("span",null,"API endpoint",-1))]),t("label",x,[r(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.form.type=s),type:"radio",value:"export",class:"rounded border-border text-accent focus:ring-accent/30"},null,512),[[d,o.form.type]]),e[8]||(e[8]=t("span",null,"Export weights",-1))])])]),o.form.type==="api"?(a(),n("div",B,[e[11]||(e[11]=t("label",{class:"app-label"},"Region",-1)),r(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.form.region=s),class:"app-select"},[...e[10]||(e[10]=[t("option",{value:"us-east-1"},"us-east-1",-1),t("option",{value:"eu-west-1"},"eu-west-1",-1)])],512),[[p,o.form.region]])])):m("",!0),o.error?(a(),n("p",N,u(o.error),1)):m("",!0),t("div",P,[i(l,{type:"submit",disabled:o.loading},{default:f(()=>[y(u(o.loading?"Deployingâ€¦":o.form.type==="api"?"Deploy to API":"Export weights"),1)]),_:1},8,["disabled"]),i(l,{variant:"secondary",to:"/app/deployments"},{default:f(()=>[...e[12]||(e[12]=[y("Cancel",-1)])]),_:1})])],32)])}const q=S(V,[["render",C]]);export{q as default};
