{"version":3,"file":"useMockApi-CJyUoVJj.js","sources":["../../../../composables/useMockApi.ts"],"sourcesContent":["/**\n * Frontend-only mock API for when backend is not deployed.\n * Returns realistic, consistent data so the full user journey works.\n */\n\nconst NOW = new Date().toISOString()\n\nexport const MOCK_IDS = {\n  project: 'proj_mock1',\n  dataset: 'ds_mock1',\n  run: 'run_mock1',\n  deployment: 'dep_mock1',\n  knowledgeBase: 'kb_mock1',\n  pipeline: 'pipe_mock1',\n  trigger: 'trig_mock1',\n  orgSlug: 'acme',\n  apiKey: 'key_mock1',\n  credential: 'cred_mock1',\n} as const\n\nlet simulateErrorCount = 0\nexport function setSimulateErrorNext() {\n  simulateErrorCount = 1\n}\n\nfunction maybeSimulateError(): void {\n  if (simulateErrorCount > 0) {\n    simulateErrorCount -= 1\n    throw new Error('Simulated error for testing.')\n  }\n}\n\nexport async function mockFetch<T = unknown>(\n  path: string,\n  options: { method?: string; body?: unknown; query?: Record<string, string> } = {}\n): Promise<T> {\n  const method = (options.method || 'GET').toUpperCase()\n  maybeSimulateError()\n  const pathOnly = path.replace(/\\?.*$/, '')\n  const pathParts = pathOnly.replace(/^\\/api\\/?/, '').split('/').filter(Boolean)\n\n  if (pathParts[0] === 'projects' && pathParts.length === 1) {\n    if (method === 'GET') {\n      return {\n        projects: [\n          { id: MOCK_IDS.project, name: 'Support Bot', base_model: 'mistralai/Mistral-7B-v0.2', objective: 'dpo', created_at: NOW },\n        ],\n      } as T\n    }\n    if (method === 'POST') return { id: MOCK_IDS.project } as T\n  }\n\n  if (pathParts[0] === 'datasets') {\n    if (pathParts.length === 1) {\n      if (method === 'GET') {\n        return { datasets: [{ id: MOCK_IDS.dataset, name: 'Support chat v1', status: 'ready', row_count: 10200, created_at: NOW }] } as T\n      }\n      if (method === 'POST') return { id: MOCK_IDS.dataset } as T\n    }\n    if (pathParts.length === 2 && pathParts[1] !== 'new') {\n      const id = pathParts[1]\n      if (method === 'GET') {\n        return {\n          id,\n          name: 'Support chat v1',\n          status: 'ready',\n          source: { type: 'upload' },\n          row_count: 10200,\n          quality: { duplication_pct: 2, pii_flagged: 0, schema_adherence: 98 },\n          versions: [{ id: 'dsv_1', tag: 'v1', status: 'ready', row_count: 10200, created_at: NOW }],\n        } as T\n      }\n      if (pathParts.length === 3 && pathParts[2] === 'ingest' && method === 'POST') {\n        return { status: 'ready', row_count: 10200 } as T\n      }\n    }\n  }\n\n  if (pathParts[0] === 'runs' && pathParts.length === 1) {\n    if (method === 'GET') {\n      return {\n        runs: [{ id: MOCK_IDS.run, project_id: MOCK_IDS.project, status: 'succeeded', duration_sec: 7200, cost_usd: 14.2, created_at: NOW }],\n      } as T\n    }\n    if (method === 'POST') return { id: MOCK_IDS.run } as T\n  }\n\n  if (pathParts[0] === 'deploy') {\n    if (method === 'GET') {\n      return {\n        deployments: [\n          { id: MOCK_IDS.deployment, model_version_id: 'mv_1', type: 'api', status: 'live', endpoint_url: 'https://api.aploy.dev/v1/deployments/dep_mock1/invoke', created_at: NOW },\n        ],\n      } as T\n    }\n    if (method === 'POST') return undefined as T\n  }\n\n  if (pathParts[0] === 'org') {\n    if (pathParts.length === 1 && method === 'GET') return { name: 'Acme Inc', slug: MOCK_IDS.orgSlug } as T\n    if (pathParts[1] === 'api-keys') {\n      if (pathParts.length === 2) {\n        if (method === 'GET') return { api_keys: [{ id: MOCK_IDS.apiKey, name: 'Production', key_prefix: 'aploy_', last_used_at: null }] } as T\n        if (method === 'POST') return { raw_key: 'aploy_mock_' + Math.random().toString(36).slice(2) } as T\n      }\n      if (pathParts.length === 3 && method === 'DELETE') return undefined as T\n    }\n    if (pathParts[1] === 'credentials') {\n      if (pathParts.length === 2) {\n        if (method === 'GET') return { credentials: [{ id: MOCK_IDS.credential, name: 'AWS prod', type: 's3', status: 'ok', last_tested_at: NOW }] } as T\n        if (method === 'POST') return undefined as T\n      }\n      if (pathParts.length === 3) {\n        if (pathParts[2] === 'test' && method === 'POST') return { ok: true } as T\n        if (method === 'DELETE') return undefined as T\n      }\n    }\n  }\n\n  if (pathParts[0] === 'knowledge-bases') {\n    if (pathParts.length === 1) {\n      if (method === 'GET') return { knowledge_bases: [{ id: MOCK_IDS.knowledgeBase, name: 'Product docs', status: 'ready', chunk_count: 1200 }] } as T\n      if (method === 'POST') return { id: MOCK_IDS.knowledgeBase } as T\n    }\n    if (pathParts.length === 2 && pathParts[1] !== 'new') {\n      const id = pathParts[1]\n      if (method === 'GET') {\n        return { id, name: 'Product docs', status: 'ready', chunk_count: 1200, source: { type: 'upload' }, embedding_model: 'text-embedding-3-small', embedding_dimension: 1536, chunk_config: { size: 512, overlap: 64 } } as T\n      }\n      if (pathParts.length === 3 && pathParts[2] === 'ingest' && method === 'POST') return { status: 'ready', chunk_count: 1200 } as T\n    }\n  }\n\n  if (pathParts[0] === 'pipelines') {\n    if (pathParts.length === 1) {\n      if (method === 'GET') return { pipelines: [{ id: MOCK_IDS.pipeline, name: 'Summarize then classify', description: '', steps: [], created_at: NOW }] } as T\n      if (method === 'POST') return { id: MOCK_IDS.pipeline } as T\n    }\n    if (pathParts.length === 2 && pathParts[1] !== 'new') {\n      const id = pathParts[1]\n      if (method === 'GET') return { id, name: 'Summarize then classify', description: '', steps: [{ id: 'step1', type: 'model', name: 'step1' }] } as T\n    }\n  }\n\n  if (pathParts[0] === 'triggers') {\n    if (pathParts.length === 1) {\n      if (method === 'GET') return { triggers: [{ id: MOCK_IDS.trigger, pipeline_id: MOCK_IDS.pipeline, name: 'Webhook', type: 'webhook', status: 'active', webhook_url: 'https://api.aploy.dev/webhooks/trig_mock1' }] } as T\n      if (method === 'POST') return undefined as T\n    }\n    if (pathParts.length === 2 && method === 'DELETE') return undefined as T\n  }\n\n  if (pathParts[0] === 'billing') {\n    if (pathParts[1] === 'usage' && method === 'GET') {\n      return { period_start: new Date().toISOString().slice(0, 10), period_end: new Date().toISOString().slice(0, 10), compute_gpu_hours: 24.5, storage_gb_months: 120, total_usd: 42.5, forecast_usd: 55 } as T\n    }\n    if (pathParts[1] === 'invoices' && method === 'GET') return { invoices: [] } as T\n    if (pathParts[1] === 'setup-customer' && method === 'POST') return { stripe_customer_id: 'cus_mock' } as T\n  }\n\n  if (method === 'GET') {\n    if (pathParts[0] === 'projects') return { projects: [] } as T\n    if (pathParts[0] === 'datasets') return { datasets: [] } as T\n    if (pathParts[0] === 'runs') return { runs: [] } as T\n    if (pathParts[0] === 'deploy') return { deployments: [] } as T\n    if (pathParts[0] === 'knowledge-bases') return { knowledge_bases: [] } as T\n    if (pathParts[0] === 'pipelines') return { pipelines: [] } as T\n    if (pathParts[0] === 'triggers') return { triggers: [] } as T\n  }\n  return {} as T\n}\n\nexport function useMockApi() {\n  return { mockFetch, MOCK_IDS, setSimulateErrorNext }\n}\n"],"names":[],"mappings":"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"}