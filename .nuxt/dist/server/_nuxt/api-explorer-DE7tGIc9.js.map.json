{"file":"api-explorer-DE7tGIc9.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_push","_parent","_ssrLooseContain","_ssrLooseEqual","_ssrRenderList","_ssrIncludeBooleanAttr","_ssrInterpolate","_","_scopeId","_createVNode","_withDirectives","_openBlock","_createBlock","_Fragment","_renderList","_toDisplayString","_createTextVNode","_ssrRenderClass","_createCommentVNode"],"sources":["../../../../pages/app/api-explorer.vue"],"sourcesContent":["<template>\n  <div class=\"app-page\">\n    <AppPageHeader\n      title=\"API Explorer\"\n      description=\"Try your deployed model. Send a request and see the response.\"\n    />\n    <div class=\"space-y-4\">\n      <AppCard>\n        <h3 class=\"app-section-title mb-3\">Request</h3>\n        <div class=\"space-y-3\">\n          <div>\n            <label class=\"app-label\">Deployment (trained model)</label>\n            <select v-model=\"selectedDeploymentId\" class=\"app-select\">\n              <option value=\"\">Select a deployment</option>\n              <option v-for=\"d in deployments\" :key=\"d.id\" :value=\"d.id\">\n                {{ d.id }} — {{ d.model_version_id }} ({{ d.status }})\n              </option>\n            </select>\n          </div>\n          <div>\n            <label class=\"app-label\">API key (optional — leave blank to use session)</label>\n            <input\n              v-model=\"apiKey\"\n              class=\"app-input font-mono text-sm\"\n              type=\"password\"\n              placeholder=\"aploy_...\"\n            />\n          </div>\n          <div>\n            <label class=\"app-label\">URL</label>\n            <p class=\"font-mono text-sm text-muted-foreground break-all\">\n              {{ invokeUrl }}\n            </p>\n          </div>\n          <div>\n            <label class=\"app-label\">Request body (JSON)</label>\n            <textarea\n              v-model=\"requestBody\"\n              class=\"app-input min-h-[180px] font-mono text-sm\"\n              placeholder='{\"messages\": [{\"role\": \"user\", \"content\": \"Hello\"}], \"max_tokens\": 128}'\n            />\n          </div>\n          <div class=\"flex flex-wrap gap-2\">\n            <AppButton :disabled=\"!selectedDeploymentId || sending\" @click=\"sendRequest\">\n              {{ sending ? 'Sending…' : 'Send' }}\n            </AppButton>\n            <AppButton variant=\"secondary\" :disabled=\"!invokeUrl\" @click=\"copyCurl\">\n              Copy as cURL\n            </AppButton>\n          </div>\n        </div>\n      </AppCard>\n      <AppCard v-if=\"response !== null\">\n        <h3 class=\"app-section-title mb-2\">Response</h3>\n        <p class=\"text-sm text-muted-foreground mb-2\">\n          Status: <span :class=\"statusClass\">{{ responseStatus }}</span>\n          <span v-if=\"responseTime !== null\" class=\"ml-2\">· {{ responseTime }} ms</span>\n        </p>\n        <pre class=\"rounded bg-muted/50 p-3 text-xs overflow-auto max-h-[400px]\">{{ responseText }}</pre>\n      </AppCard>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\n\ndefinePageMeta({ layout: 'app' })\n\ninterface DeploymentItem {\n  id: string\n  model_version_id: string\n  status: string\n  endpoint_url?: string | null\n}\n\nexport default defineComponent({\n  name: 'ApiExplorer',\n  data() {\n    return {\n      deployments: [] as DeploymentItem[],\n      loading: true,\n      selectedDeploymentId: '',\n      requestBody: '{\"messages\": [{\"role\": \"user\", \"content\": \"Hello\"}], \"max_tokens\": 128}',\n      apiKey: '',\n      sending: false,\n      response: null as string | null,\n      responseStatus: null as number | null,\n      responseTime: null as number | null,\n    }\n  },\n  computed: {\n    invokeUrl(): string {\n      const config = useRuntimeConfig()\n      const apiUrl = (config.public.apiUrl as string) || 'http://localhost:4000'\n      if (!this.selectedDeploymentId) return apiUrl + '/v1/deployments/:id/invoke'\n      return `${apiUrl.replace(/\\/$/, '')}/v1/deployments/${this.selectedDeploymentId}/invoke`\n    },\n    responseText(): string {\n      if (this.response === null) return ''\n      try {\n        return JSON.stringify(JSON.parse(this.response), null, 2)\n      } catch {\n        return this.response\n      }\n    },\n    statusClass(): string {\n      if (this.responseStatus === null) return ''\n      if (this.responseStatus >= 200 && this.responseStatus < 300) return 'text-emerald-600'\n      if (this.responseStatus >= 400) return 'text-destructive'\n      return 'text-amber-600'\n    },\n  },\n  async mounted() {\n    await this.loadDeployments()\n  },\n  methods: {\n    async loadDeployments() {\n      this.loading = true\n      try {\n        const data = await this.apiFetch<{ deployments: DeploymentItem[] }>('/api/deploy')\n        this.deployments = data.deployments || []\n        if (this.deployments.length && !this.selectedDeploymentId) {\n          this.selectedDeploymentId = this.deployments[0].id\n        }\n      } catch {\n        this.deployments = []\n      } finally {\n        this.loading = false\n      }\n    },\n    async sendRequest() {\n      if (!this.selectedDeploymentId) return\n      let body: unknown\n      try {\n        body = this.requestBody.trim() ? JSON.parse(this.requestBody) : {}\n      } catch {\n        this.response = 'Invalid JSON in request body'\n        this.responseStatus = 0\n        this.responseTime = null\n        return\n      }\n      this.sending = true\n      this.response = null\n      this.responseStatus = null\n      this.responseTime = null\n      const start = Date.now()\n      try {\n        if (this.mockMode?.value) {\n          await new Promise((r) => setTimeout(r, 300))\n          this.responseStatus = 200\n          this.response = JSON.stringify({ choices: [{ message: { role: 'assistant', content: 'Mock response from deployed model.' } }] }, null, 2)\n          this.responseTime = Date.now() - start\n          this.sending = false\n          return\n        }\n        const config = useRuntimeConfig()\n        const apiUrl = (config.public.apiUrl as string) || 'http://localhost:4000'\n        const url = `${apiUrl.replace(/\\/$/, '')}/v1/deployments/${this.selectedDeploymentId}/invoke`\n        const headers: Record<string, string> = {\n          'Content-Type': 'application/json',\n          'X-Environment': this.environment?.value ?? 'production',\n        }\n        if (this.apiKey.trim()) headers.Authorization = `Bearer ${this.apiKey.trim()}`\n        const res = await $fetch<string>(url, {\n          method: 'POST',\n          body,\n          credentials: this.apiKey.trim() ? 'omit' : 'include',\n          headers,\n        })\n        this.responseStatus = 200\n        this.response = typeof res === 'string' ? res : JSON.stringify(res)\n      } catch (e: unknown) {\n        const err = e as { response?: { status?: number }; data?: unknown }\n        this.responseStatus = err.response?.status ?? 0\n        this.response = err.data != null ? JSON.stringify(err.data, null, 2) : (e as Error).message\n      } finally {\n        this.responseTime = Date.now() - start\n        this.sending = false\n      }\n    },\n    copyCurl() {\n      let body: string\n      try {\n        body = this.requestBody.trim() ? JSON.stringify(JSON.parse(this.requestBody)) : '{}'\n      } catch {\n        body = '{}'\n      }\n      const auth = this.apiKey.trim() ? ` -H \"Authorization: Bearer ${this.apiKey.trim()}\"` : ''\n      const curl = `curl -X POST \"${this.invokeUrl}\" -H \"Content-Type: application/json\"${auth} -d '${body}'`\n      if (typeof navigator !== 'undefined' && navigator.clipboard) {\n        navigator.clipboard.writeText(curl)\n      }\n      // Fallback for older browsers\n      try {\n        const ta = document.createElement('textarea')\n        ta.value = curl\n        document.body.appendChild(ta)\n        ta.select()\n        document.execCommand('copy')\n        document.body.removeChild(ta)\n      } catch {}\n    },\n  },\n  setup() {\n    const { apiFetch, apiUrl, environment } = useAployApi()\n    const { mockMode } = useMockMode()\n    return { apiFetch, apiUrl, environment, mockMode }\n  },\n})\n</script>\n"],"version":3}