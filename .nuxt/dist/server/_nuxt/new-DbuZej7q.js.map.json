{"file":"new-DbuZej7q.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_ssrIncludeBooleanAttr","_ssrLooseContain","_ssrLooseEqual","_ssrRenderList","_ssrInterpolate","_ssrRenderAttr","_push","_parent"],"sources":["../../../../pages/app/knowledge-bases/new.vue"],"sourcesContent":["<template>\n  <div class=\"app-page-narrow\">\n    <AppPageHeader\n      title=\"New knowledge base\"\n      description=\"Create a knowledge base. Add documents via ingest (upload files or S3/GCS).\"\n      back-to=\"/app/knowledge-bases\"\n      back-label=\"Knowledge bases\"\n    />\n    <form @submit.prevent=\"onSubmit\" class=\"space-y-6\">\n      <div>\n        <label class=\"app-label\">Name</label>\n        <input v-model=\"form.name\" class=\"app-input\" placeholder=\"e.g. Product docs\" />\n      </div>\n      <div>\n        <label class=\"app-label\">Source (for ingest without upload)</label>\n        <select v-model=\"form.sourceType\" class=\"app-select\">\n          <option value=\"upload\">Upload (use ingest with files)</option>\n          <option value=\"s3\">S3</option>\n          <option value=\"gcs\">GCS</option>\n        </select>\n        <template v-if=\"form.sourceType === 's3' || form.sourceType === 'gcs'\">\n          <label class=\"app-label mt-2\">Credential</label>\n          <select v-model=\"form.credentialId\" class=\"app-select\">\n            <option value=\"\">Select credential</option>\n            <option v-for=\"c in credentials\" :key=\"c.id\" :value=\"c.id\">{{ c.name }} ({{ c.type }})</option>\n          </select>\n          <input v-model=\"form.bucket\" class=\"app-input mt-2\" placeholder=\"Bucket\" />\n          <input v-model=\"form.prefix\" class=\"app-input mt-2\" placeholder=\"Prefix (optional)\" />\n        </template>\n      </div>\n      <div>\n        <label class=\"app-label\">Chunk size</label>\n        <input v-model.number=\"form.chunkSize\" type=\"number\" min=\"64\" max=\"2048\" class=\"app-input\" placeholder=\"512\" />\n      </div>\n      <div>\n        <label class=\"app-label\">Chunk overlap</label>\n        <input v-model.number=\"form.chunkOverlap\" type=\"number\" min=\"0\" max=\"512\" class=\"app-input\" placeholder=\"64\" />\n      </div>\n      <p v-if=\"error\" class=\"app-error\">{{ error }}</p>\n      <div class=\"flex gap-3\">\n        <AppButton type=\"submit\" :disabled=\"loading\">{{ loading ? 'Creatingâ€¦' : 'Create knowledge base' }}</AppButton>\n        <AppButton variant=\"secondary\" to=\"/app/knowledge-bases\">Cancel</AppButton>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\n\ndefinePageMeta({ layout: 'app' })\n\ninterface Credential { id: string; name: string; type: string }\n\nexport default defineComponent({\n  name: 'NewKnowledgeBase',\n  data() {\n    return {\n      form: {\n        name: '',\n        sourceType: 'upload' as 'upload' | 's3' | 'gcs',\n        credentialId: '',\n        bucket: '',\n        prefix: '',\n        chunkSize: 512,\n        chunkOverlap: 64,\n      },\n      credentials: [] as Credential[],\n      loading: false,\n      error: '',\n    }\n  },\n  setup() {\n    const { apiFetch } = useAployApi()\n    return { apiFetch }\n  },\n  async mounted() {\n    try {\n      const data = await this.apiFetch<{ credentials: Credential[] }>('/api/org/credentials')\n      this.credentials = data.credentials || []\n    } catch {\n      this.credentials = []\n    }\n  },\n  methods: {\n    async onSubmit() {\n      this.error = ''\n      this.loading = true\n      try {\n        const source: Record<string, unknown> = { type: this.form.sourceType }\n        if (this.form.sourceType === 's3' || this.form.sourceType === 'gcs') {\n          source.bucket = this.form.bucket || undefined\n          source.prefix = this.form.prefix || undefined\n          if (this.form.credentialId) source.credentialId = this.form.credentialId\n        }\n        const data = await this.apiFetch<{ id: string }>('/api/knowledge-bases', {\n          method: 'POST',\n          body: {\n            name: this.form.name || 'Untitled knowledge base',\n            source,\n            chunk_config: { size: this.form.chunkSize || 512, overlap: this.form.chunkOverlap ?? 64 },\n          },\n        })\n        await navigateTo(`/app/knowledge-bases/${data.id}`)\n      } catch (e) {\n        this.error = (e as Error).message || 'Failed to create knowledge base'\n      } finally {\n        this.loading = false\n      }\n    },\n  },\n})\n</script>\n"],"version":3}